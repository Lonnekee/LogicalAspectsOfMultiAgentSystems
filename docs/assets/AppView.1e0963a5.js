import{d as A,o as D,c as N,a as F}from"./index.6d74ef12.js";var E=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function $(i){if(i.__esModule)return i;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(e){var r=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return i[e]}})}),t}var f={},H={},M=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"})),p=$(M),v=E&&E.__awaiter||function(i,t,e,r){function a(o){return o instanceof e?o:new e(function(n){n(o)})}return new(e||(e=Promise))(function(o,n){function _(l){try{d(r.next(l))}catch(u){n(u)}}function m(l){try{d(r.throw(l))}catch(u){n(u)}}function d(l){l.done?o(l.value):a(l.value).then(_,m)}d((r=r.apply(i,t||[])).next())})};Object.defineProperty(f,"__esModule",{value:!0});var L=f.PythonShell=f.NewlineTransformer=f.PythonShellError=void 0;const b=p,x=p,h=p,P=p,B=p,O=p,j=p;function k(i){return typeof i=="undefined"||i===null?[]:Array.isArray(i)?i:[i]}function S(i,...t){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(let r in e)i[r]=e[r]}),i}function C(){return Math.floor(Math.random()*1e10)}const T=(0,j.promisify)(x.exec);class g extends Error{}f.PythonShellError=g;class w extends B.Transform{_transform(t,e,r){let a=t.toString();this._lastLineData&&(a=this._lastLineData+a);const o=a.split(h.EOL);this._lastLineData=o.pop(),o.forEach(this.push.bind(this)),r()}_flush(t){this._lastLineData&&this.push(this._lastLineData),this._lastLineData=null,t()}}f.NewlineTransformer=w;class c extends b.EventEmitter{constructor(t,e,r=null,a=null){super();function o(s,y){if(typeof y=="string")return c[s][y];if(typeof y=="function")return y}if(t.trim().length==0)throw Error("scriptPath cannot be empty! You must give a script for python to run");let n=this,_="";b.EventEmitter.call(this),e=S({},c.defaultOptions,e);let m;e.pythonPath?m=e.pythonPath:m=c.defaultPythonPath;let d=k(e.pythonOptions),l=k(e.args);this.scriptPath=(0,P.join)(e.scriptPath||"",t),this.command=d.concat(this.scriptPath,l),this.mode=e.mode||"text",this.formatter=o("format",e.formatter||this.mode),this.parser=o("parse",e.parser||this.mode),this.stderrParser=o("parse",e.stderrParser||"text"),this.terminated=!1,this.childProcess=(0,x.spawn)(m,this.command,e),["stdout","stdin","stderr"].forEach(function(s){n[s]=n.childProcess[s],n.parser&&n[s]&&n[s].setEncoding(e.encoding||"utf8")}),this.parser&&this.stdout&&(r||(r=new w),r.setEncoding(e.encoding||"utf8"),this.stdout.pipe(r).on("data",s=>{this.emit("message",n.parser(s))})),this.stderrParser&&this.stderr&&(a||(a=new w),a.setEncoding(e.encoding||"utf8"),this.stderr.pipe(a).on("data",s=>{this.emit("stderr",n.stderrParser(s))})),this.stderr?(this.stderr.on("data",function(s){_+=""+s}),this.stderr.on("end",function(){n.stderrHasEnded=!0,u()})):n.stderrHasEnded=!0,this.stdout?this.stdout.on("end",function(){n.stdoutHasEnded=!0,u()}):n.stdoutHasEnded=!0,this.childProcess.on("error",function(s){n.emit("error",s)}),this.childProcess.on("exit",function(s,y){n.exitCode=s,n.exitSignal=y,u()});function u(){if(!n.stderrHasEnded||!n.stdoutHasEnded||n.exitCode==null&&n.exitSignal==null)return;let s;n.exitCode&&n.exitCode!==0&&(_?s=n.parseError(_):s=new g("process exited with code "+n.exitCode),s=S(s,{executable:m,options:d.length?d:null,script:n.scriptPath,args:l.length?l:null,exitCode:n.exitCode}),(n.listeners("pythonError").length||!n._endCallback)&&n.emit("pythonError",s)),n.terminated=!0,n.emit("close"),n._endCallback&&n._endCallback(s,n.exitCode,n.exitSignal)}}static checkSyntax(t){return v(this,void 0,void 0,function*(){const e=C(),r=(0,h.tmpdir)()+P.sep+`pythonShellSyntaxCheck${e}.py`;return(0,j.promisify)(O.writeFile)(r,t).then(()=>this.checkSyntaxFile(r))})}static getPythonPath(){return this.defaultOptions.pythonPath?this.defaultOptions.pythonPath:this.defaultPythonPath}static checkSyntaxFile(t){return v(this,void 0,void 0,function*(){let r=`${this.getPythonPath()} -m py_compile ${t}`;return T(r)})}static run(t,e,r){let a=new c(t,e),o=[];return a.on("message",function(n){o.push(n)}).end(function(n){return r(n||null,o.length?o:null)})}static runString(t,e,r){const a=C(),o=h.tmpdir+P.sep+`pythonShellFile${a}.py`;return(0,O.writeFileSync)(o,t),c.run(o,e,r)}static getVersion(t){return t||(t=this.getPythonPath()),T(t+" --version")}static getVersionSync(t){return t||(t=this.getPythonPath()),(0,x.execSync)(t+" --version").toString()}parseError(t){let e=""+t,r;if(/^Traceback/.test(e)){let a=e.trim().split(h.EOL),o=a.pop();r=new g(o),r.traceback=t,r.stack+=h.EOL+"    ----- Python Traceback -----"+h.EOL+"  ",r.stack+=a.slice(1).join(h.EOL+"  ")}else r=new g(e);return r}send(t){if(!this.stdin)throw new Error("stdin not open for writing");let e=this.formatter?this.formatter(t):t;return this.mode!=="binary"&&(e+=h.EOL),this.stdin.write(e),this}end(t){return this.childProcess.stdin&&this.childProcess.stdin.end(),this._endCallback=t,this}kill(t){return this.terminated=this.childProcess.kill(t),this}terminate(t){return this.kill(t)}}L=f.PythonShell=c;c.defaultPythonPath=process.platform!="win32"?"python3":"python";c.defaultOptions={};c.format={text:function(t){if(t){if(typeof t!="string")return t.toString()}else return"";return t},json:function(t){return JSON.stringify(t)}};c.parse={text:function(t){return t},json:function(t){return JSON.parse(t)}};const V={class:"application"},I=F("h1",null,"This is the page that will host the application.",-1),J=[I],z=A({__name:"AppView",setup(i){return L.runString("from tkinter import *; Tk().mainloop()",void 0,function(t){if(t)throw t;console.log("finished")}),(t,e)=>(D(),N("div",V,J))}});export{z as default};
